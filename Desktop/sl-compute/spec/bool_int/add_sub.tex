\section{Addition and Subtraction}

Boolean integer shares support addition and subtraction operations, defined as follows:

\begin{itemize}
    \item {\bf Addition:} Given two boolean integer shares, $\bint{x}$ and
          $\bint{y}$, representing integers $x$ and $y$, the addition function returns a boolean integer share corresponding to $x+y$.
    \item {\bf Subtraction:} Given two boolean integer shares, $\bint{x}$ and
          $\bint{y}$, the function outputs a boolean integer share representing: 
          \begin{itemize}
          	\item[*] $x-y$ if $x \ge y$
          	\item[*] $2^k - (y - x)$ if $x < y$, where $k$ is the bit-length of the boolean integer shares.
          \end{itemize}
\end{itemize}

The Silent Compute platform implements addition using a parallel prefix adder circuit (\cite{Har03}) in a secret-shared format. Along with the boolean integer share output, the function also returns a carry bit, which can be used in subsequent subtraction operations. If unnecessary, this bit can be discarded.

\begin{protocol}[Addition]

    $\Add{\bint{x}}{\bint{y}}$:\\
    \indent $\bint{x'}, \bint{y'}=$ EqualizeLength$(\bint{x}, \bint{y})$ \\
    \indent $\bitvec{X} = $ Int2BitArr$(\bint{x'})$ \\
    \indent $\bitvec{Y} = $ Int2BitArr$(\bint{y'})$ \\
    \indent $\bitvec{P} = map(\oplus, \bitvec{X}, \bitvec{Y})$ \\
    \indent $\bitvec{G} = map(\wedge, \bitvec{X}, \bitvec{Y})$ \\
    \indent $l=$len$(X)$ \\
    \indent for $step=0,\ldots,\log {l} - 1$: \\
    \indent \indent $\bitvec{PC} = \bitvec{P}$ \\
    \indent \indent $\bitvec{GC} = \bitvec{G}$ \\
    \indent \indent for $i=2^{step},\ldots,l - 1$: \\
    \indent \indent \indent $\bitvec{GC_i} = (\bitvec{G_{i - 2^{step}}} \wedge \bitvec{P_i}) \vee \bitvec{G_i}$ \\
    \indent \indent \indent $\bitvec{PC_i} = \bitvec{P_{i - 2^{step}}} \wedge \bitvec{P_i}$ \\
    \indent \indent $\bitvec{P} = \bitvec{PC}$ \\
    \indent \indent $\bitvec{G} = \bitvec{GC}$ \\
    \indent $\bitvec{O_0} = \bitvec{X_0} \oplus \bitvec{Y_0}$ \\
    \indent for $i=1,\ldots,l-1$: \\
    \indent \indent $\bitvec{O_i} = \bitvec{G_{i - 1}} \oplus \bitvec{X_i} \oplus \bitvec{Y_i}$  \\
    \indent $\bint{o} = $BitArr2Int$(\bitvec{O})$ \\
    \indent return $\bint{o}, \bitvec{G_l}$
\end{protocol}

The Silent Compute platform implements subtraction using two’s complement arithmetic \cite{Wiki2sComp} in a secret-shared format. Traditional two’s complement subtraction is designed for signed integers, but since Boolean integer shares represent unsigned integers, this method is still applicable, ensuring correctness as defined above.


\begin{protocol}[Subtraction]

    $\Sub{\bint{x}}{\bint{y}}$:\\
    \indent $\bint{x'}, \bint{y'}=$ EqualizeLength$(\bint{x}, \bint{y})$ \\
    \indent $\bitvec{X} = $Int2BitArr$(\bint{x'})$ \\
    \indent $\bitvec{Y} = $Int2BitArr$(\bint{y'})$ \\
    \indent $\bitvec{YI} = map($NOT$, \bitvec{Y})$ \\
    \indent $\bint{yi} = $BitArr2Int$(\bitvec{YI})$ \\
    \indent $\bint{t}, \bit{c} = $Add$(\bint{x'}, \bint{yi})$ \\
    \indent $l=$len$(X)$ \\
    \indent $\bitvec{C_0} = \bit{c}$ \\
    \indent for $i=1,\ldots,l-1$: \\
    \indent \indent $\bitvec{C_i} = $InputBit$(0)$ \\
    \indent $\bint{c} = $BitArr2Int$(\bitvec{C})$ \\
    \indent $\bint{o}, \_ = $Add$(\bint{t}, \bint{c})$ \\
    \indent return $\bint{o}$
\end{protocol}
